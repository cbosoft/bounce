#include <sstream>
#include "version.hpp"

// From https://github.com/andrew-hardin/cmake-git-version-tracking

bool GitMetadata::populated() {
    return @GIT_RETRIEVED_STATE@;
}
bool GitMetadata::is_dirty() {
    return @GIT_IS_DIRTY@;
}
std::string GitMetadata::author_name() {
    return "@GIT_AUTHOR_NAME@";
}
std::string GitMetadata::author_email() {
    return "@GIT_AUTHOR_EMAIL@";
}
std::string GitMetadata::commit_SHA1() {
    return "@GIT_HEAD_SHA1@";
}
std::string GitMetadata::commit_date() {
    return "@GIT_COMMIT_DATE_ISO8601@";
}
std::string GitMetadata::commit_subject() {
    return "@GIT_COMMIT_SUBJECT@";
}
std::string GitMetadata::commit_body() {
    return @GIT_COMMIT_BODY@;
}
std::string GitMetadata::describe() {
    return "@GIT_DESCRIBE@";
}
std::string GitMetadata::branch() {
    return "@GIT_BRANCH@";
}

std::string GitMetadata::version_string() {
    std::stringstream ss;

    ss << "Bounce version "
       << GitMetadata::describe()
       << (GitMetadata::is_dirty()?"+":"")
       << " (" << GitMetadata::branch() << ")"
       << std::endl;
    return ss.str();
}